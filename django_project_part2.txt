unction () { console.log("‚úÖ WebSocket Connected!"); };
    socket.onerror = function(error) { console.error("‚ùå WebSocket Error:", error); };

    function getOrderItems() {
        const rawElements = document.querySelectorAll('#raw-order-data div');
        return Array.from(rawElements).map(el => ({
            name: el.getAttribute('data-name'),
            quantity: parseInt(el.getAttribute('data-quantity')),
            price: el.getAttribute('data-price')
        }));
    }

    window.sendToCustomer = function() {
        if (!socket || socket.readyState !== WebSocket.OPEN) {
            alert("‚ö†Ô∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö... ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà");
            return;
        }
        const items = getOrderItems();
        const grandTotal = "{{ grand_total|floatformat:2 }}";
        socket.send(JSON.stringify({
            command: 'show_customer_payment',
            items: items,
            total: '‡∏ø' + grandTotal
        }));
    };

    window.clearCustomerScreen = function() {
        if (socket && socket.readyState === WebSocket.OPEN) {
            socket.send(JSON.stringify({ command: 'hide_customer_payment' }));
        }
    };

    window.handleCloseBill = function(event) {
        window.clearCustomerScreen();
        return true;
    };
</script>
{% endblock %}


=== templates/restaurants/cashier_dashboard.html ===
{% extends "base.html" %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800">üñ•Ô∏è Cashier / POS</h1>
    <div class="text-sm text-gray-500">
        {{ restaurant.name }}
    </div>
</div>

<div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">
    {% for table in tables %}
    <a href="{% url 'table_bill_detail' table.id %}" 
       class="relative p-6 rounded-xl shadow-sm border-2 transition hover:shadow-md
       {% if table.has_active_order %}
         bg-blue-50 border-blue-500 cursor-pointer
       {% else %}
         bg-white border-gray-200 opacity-70 hover:opacity-100
       {% endif %}">
        
        <h3 class="text-xl font-bold text-gray-700 mb-2">{{ table.name }}</h3>
        
        {% if table.has_active_order %}
            <div class="text-blue-600 font-bold text-lg">
                ‡∏ø{{ table.pending_amount }}
            </div>
            <p class="text-xs text-gray-500 mt-1">{{ table.order_count }} ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>
            
            <span class="absolute top-2 right-2 flex h-3 w-3">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-3 w-3 bg-blue-500"></span>
            </span>
        {% else %}
            <div class="text-gray-300 font-bold text-lg">‡∏ß‡πà‡∏≤‡∏á</div>
        {% endif %}
    </a>
    {% endfor %}
</div>


<script>
    const restaurantId = "{{ restaurant.id }}";
    const wsScheme = window.location.protocol === "https:" ? "wss" : "ws";
    
    // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ WebSocket
    const socket = new WebSocket(
        wsScheme + '://' + window.location.host + '/ws/restaurant/' + restaurantId + '/'
    );

    socket.onopen = function() {
        console.log("‚úÖ Cashier Dashboard Connected");
    };

    socket.onmessage = function(e) {
        const data = JSON.parse(e.data);
        
        // ‚≠ê ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
        if (data.command === 'new_order_alert') {
            console.log("üîî New Order:", data);
            
            // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á)
            // const audio = new Audio('/static/sound/ding.mp3');
            // audio.play();

            // ‡πÅ‡∏™‡∏î‡∏á Notification ‡πÅ‡∏ö‡∏ö Browser (Optional)
            if (Notification.permission === "granted") {
                new Notification("‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà!", { body: `‡πÇ‡∏ï‡πä‡∏∞ ${data.table} ‡∏¢‡∏≠‡∏î ${data.total} ‡∏ö‡∏≤‡∏ó` });
            }

            // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
            setTimeout(() => {
                window.location.reload();
            }, 1000); // ‡∏´‡∏ô‡πà‡∏ß‡∏á 1 ‡∏ß‡∏¥ ‡πÉ‡∏´‡πâ Server ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à
        }
        
        // ‚≠ê ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î‡∏ö‡∏¥‡∏•/‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡πÇ‡∏ï‡πä‡∏∞
        if (data.command === 'refresh_tables') {
            window.location.reload();
        }
    };
    
    // ‡∏Ç‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
    if (Notification.permission !== "denied") {
        Notification.requestPermission();
    }
</script>


{% endblock %}


=== templates/restaurants/create.html ===
{% extends "base.html" %}

{% block content %}
<div class="max-w-lg mx-auto bg-white p-8 rounded-lg shadow-lg mt-10">
    <h2 class="text-2xl font-bold mb-6 text-gray-800 text-center">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h2>
    <p class="text-gray-600 text-center mb-8">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö RPOS</p>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        {% for field in form %}
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="{{ field.id_for_label }}">
                {{ field.label }}
            </label>
            {{ field }}
            {% if field.errors %}
                <p class="text-red-500 text-xs italic mt-1">{{ field.errors.0 }}</p>
            {% endif %}
        </div>
        {% endfor %}

        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded focus:outline-none focus:shadow-outline mt-4 transition duration-150">
            ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
        </button>
    </form>
</div>
{% endblock %}


=== templates/restaurants/dashboard.html ===
{% extends "base.html" %}

{% block content %}
<div class="flex flex-col md:flex-row gap-6">
    
    <aside class="w-full md:w-64 bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-fit shrink-0">
        <div class="text-center mb-6">
            {% if restaurant.image %}
                <img src="{{ restaurant.image.url }}" 
                    alt="{{ restaurant.name }}" 
                    class="w-24 h-24 rounded-full mx-auto mb-3 object-cover border-4 border-blue-50 shadow-md">
            {% else %}
                <div class="w-24 h-24 bg-linear-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-3 text-4xl shadow-inner text-blue-500">
                    üè™
                </div>
            {% endif %}
            <h3 class="font-bold text-gray-800 text-lg mt-2">{{ restaurant.name }}</h3>
            <p class="text-xs text-gray-500">Owner Dashboard</p>
        </div>
        <nav class="space-y-1">
            <a href="{% url 'dashboard' %}" class="flex items-center gap-3 px-4 py-3 bg-blue-50 text-blue-700 font-bold rounded-lg transition">
                <span>üè†</span> ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
            </a>
            <a href="{% url 'menu_manage' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üçΩÔ∏è</span> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π
            </a>
            <a href="{% url 'table_list' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üé´</span> ‡πÇ‡∏ï‡πä‡∏∞ & QR Code
            </a>
            <a href="{% url 'kitchen_dashboard' %}" target="_blank" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üë®‚Äçüç≥</span> ‡∏à‡∏≠‡∏Ñ‡∏£‡∏±‡∏ß (KDS)
            </a>
            <a href="{% url 'cashier_dashboard' %}" target="_blank" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üñ•Ô∏è</span> ‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå (POS)
            </a>
            
            <a href="{% url 'report_sales' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üìä</span> ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
            </a>
            <div class="border-t my-2"></div>
            <a href="{% url 'restaurant_settings' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>‚öôÔ∏è</span> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
            </a>

            <a href="{% url 'customer_display' restaurant.slug %}" target="_blank" onclick="openCustomerWindow(event, this.href)" class="flex items-center gap-3 p-4 bg-purple-600 text-white rounded-xl shadow-lg hover:bg-purple-700 transition transform hover:scale-105 mt-4">
                
                <div class="p-3 bg-white/20 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                </div>
                
                <div>
                    <h3 class="font-bold text-lg">‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≠‡∏ù‡∏±‡πà‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    <p class="text-sm text-purple-200">Customer Display Screen</p>
                </div>
            </a>
        </nav>
    </aside>

    <main class="flex-1">
        <div class="mb-8 flex justify-between items-end">
            <div>
                <h2 class="text-2xl font-bold text-gray-800">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, {{ user.first_name|default:user.email }} üëã</h2>
                <p class="text-gray-500">‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
            </div>
            <span class="text-sm bg-gray-100 px-3 py-1 rounded-full text-gray-600">
                üìÖ {% now "d F Y" %}
            </span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                        <h3 class="text-2xl font-bold text-green-600">‡∏ø{{ today_sales|floatformat:0 }}</h3>
                    </div>
                    <div class="p-2 bg-green-50 rounded-lg text-green-600">üí∞</div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                        <h3 class="text-2xl font-bold text-gray-800">{{ today_orders_count }}</h3>
                    </div>
                    <div class="p-2 bg-blue-50 rounded-lg text-blue-600">üßæ</div>
                </div>
            </div>

            <a href="{% url 'kitchen_dashboard' %}" target="_blank" class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition group">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">‡∏£‡∏≠‡∏Ñ‡∏£‡∏±‡∏ß‡∏ó‡∏≥</p>
                        <h3 class="text-2xl font-bold text-orange-500 group-hover:text-orange-600">{{ pending_orders_count }}</h3>
                    </div>
                    <div class="p-2 bg-orange-50 rounded-lg text-orange-500">üî•</div>
                </div>
            </a>

            <a href="{% url 'cashier_dashboard' %}" class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition group">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≤‡∏ô</p>
                        <h3 class="text-2xl font-bold text-purple-600 group-hover:text-purple-700">{{ active_tables_count }} <span class="text-sm font-normal text-gray-400">‡πÇ‡∏ï‡πä‡∏∞</span></h3>
                    </div>
                    <div class="p-2 bg-purple-50 rounded-lg text-purple-600">üçΩÔ∏è</div>
                </div>
            </a>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                <h3 class="font-bold text-gray-800">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                <a href="{% url 'cashier_dashboard' %}" class="text-sm text-blue-600 hover:underline">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå &rarr;</a>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left">
                    <thead class="bg-gray-50 text-gray-500">
                        <tr>
                            <th class="px-6 py-3">‡πÄ‡∏ß‡∏•‡∏≤</th>
                            <th class="px-6 py-3">‡πÇ‡∏ï‡πä‡∏∞</th>
                            <th class="px-6 py-3">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô</th>
                            <th class="px-6 py-3">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100">
                        {% for order in recent_orders %}
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 text-gray-500">{{ order.created_at|date:"d/m/Y @ H:i" }}</td>
                            <td class="px-6 py-4 font-medium text-gray-800">{{ order.table.name }}</td>
                            <td class="px-6 py-4 text-gray-800">‡∏ø{{ order.total_price }}</td>
                            <td class="px-6 py-4">
                                <span class="px-2 py-1 rounded-full text-xs font-bold
                                    {% if order.is_paid %}bg-green-100 text-green-700
                                    {% elif order.status == 'CANCELLED' %}bg-red-100 text-red-700
                                    {% else %}bg-yellow-100 text-yellow-700{% endif %}">
                                    {% if order.is_paid %}‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß{% else %}{{ order.get_status_display }}{% endif %}
                                </span>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="4" class="px-6 py-8 text-center text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>
{% endblock %}


=== templates/restaurants/settings.html ===
{% extends "base.html" %}

{% block content %}
<div class="flex flex-col md:flex-row gap-6">
    
    <aside class="w-full md:w-64 bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-fit shrink-0">
        <div class="text-center mb-6">
            {% if restaurant.image %}
                <img src="{{ restaurant.image.url }}" 
                    alt="{{ restaurant.name }}" 
                    class="w-24 h-24 rounded-full mx-auto mb-3 object-cover border-4 border-blue-50 shadow-md">
            {% else %}
                <div class="w-24 h-24 bg-linear-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-3 text-4xl shadow-inner text-blue-500">
                    üè™
                </div>
            {% endif %}
            <h3 class="font-bold text-gray-800 text-lg mt-2">{{ restaurant.name }}</h3>
            <p class="text-xs text-gray-500">Owner Dashboard</p>
        </div>
        <nav class="space-y-1">
            <a href="{% url 'dashboard' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 font-bold rounded-lg transition">
                <span>üè†</span> ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
            </a>
            <a href="{% url 'menu_manage' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üçΩÔ∏è</span> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π
            </a>
            <a href="{% url 'table_list' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üé´</span> ‡πÇ‡∏ï‡πä‡∏∞ & QR Code
            </a>
            <a href="{% url 'kitchen_dashboard' %}" target="_blank" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üë®‚Äçüç≥</span> ‡∏à‡∏≠‡∏Ñ‡∏£‡∏±‡∏ß (KDS)
            </a>
            <a href="{% url 'cashier_dashboard' %}" target="_blank" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üñ•Ô∏è</span> ‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå (POS)
            </a>
            
            <a href="{% url 'report_sales' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üìä</span> ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
            </a>
            <div class="border-t my-2"></div>
            <a href="{% url 'restaurant_settings' %}" class="flex items-center gap-3 px-4 py-3 bg-blue-50 text-blue-700 rounded-lg transition">
                <span>‚öôÔ∏è</span> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
            </a>

            <a href="{% url 'customer_display' restaurant.slug %}" target="_blank" onclick="openCustomerWindow(event, this.href)" class="flex items-center gap-3 p-4 bg-purple-600 text-white rounded-xl shadow-lg hover:bg-purple-700 transition transform hover:scale-105 mt-4">
                
                <div class="p-3 bg-white/20 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                </div>
                
                <div>
                    <h3 class="font-bold text-lg">‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≠‡∏ù‡∏±‡πà‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    <p class="text-sm text-purple-200">Customer Display Screen</p>
                </div>
            </a>
        </nav>
    </aside>

    <main class="flex-1">
        <div class="max-w-3xl bg-white rounded-xl shadow-sm border border-gray-100 p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
            
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div class="mb-8 flex flex-col items-center sm:flex-row gap-6 p-6 bg-gray-50 rounded-xl border border-dashed border-gray-300">
                    <div class="shrink-0 relative">
                        {% if restaurant.image %}
                            <img id="image-preview" src="{{ restaurant.image.url }}" class="h-32 w-32 object-cover rounded-lg shadow-md bg-white">
                        {% else %}
                            <img id="image-preview" src="https://via.placeholder.com/150?text=No+Logo" class="h-32 w-32 object-cover rounded-lg shadow-md bg-white opacity-50">
                        {% endif %}
                    </div>
                    
                    <div class="flex-1 w-full text-gray-500">
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                        <p class="text-xs text-gray-500 mb-3">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏ô‡∏≤‡∏î 800x800 px (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö JPG, PNG)</p>
                        
                        {{ form.image }}
                        
                        {% if form.image.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ form.image.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>

                <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Username)</label>
                    {{ form.username }}
                    {% if form.username.errors %}
                        <p class="text-red-500 text-xs mt-1">{{ form.username.errors.0 }}</p>
                    {% endif %}
                </div>

                <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</h3>
                <div class="space-y-4 mb-8">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                        {{ form.name }}
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                            {{ form.phone }}
                        </div>
                        </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                        {{ form.address }}
                    </div>
                </div>

                <div class="mb-8 p-6 bg-blue-50 rounded-xl border border-dashed border-blue-300">
                    <h3 class="font-bold text-gray-700 mb-4">QR Code ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡πÅ‡∏Å‡∏ô)</h3>
                    
                    <label for="id_payment_qr_image" class="cursor-pointer group flex flex-col sm:flex-row items-center gap-6 relative">
                        
                        <div class="shrink-0 relative">
                            {% if restaurant.payment_qr_image %}
                                <img id="qr-preview" src="{{ restaurant.payment_qr_image.url }}" class="h-40 w-40 object-contain rounded-lg border-2 border-white shadow-md bg-white group-hover:opacity-80 transition">
                            {% else %}
                                <div id="qr-placeholder" class="h-40 w-40 flex flex-col items-center justify-center bg-white rounded-lg border-2 border-dashed border-gray-300 text-gray-400 group-hover:bg-gray-50 transition">
                                    <span class="text-3xl mb-1">üì∑</span>
                                    <span class="text-xs text-center px-2">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ</span>
                                </div>
                                <img id="qr-preview" class="hidden h-40 w-40 object-contain rounded-lg border-2 border-white shadow-md bg-white">
                            {% endif %}
                            
                            <div class="absolute -bottom-2.5 -right-2.5 bg-blue-600 text-white p-2 rounded-full shadow-lg group-hover:scale-110 transition">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                                </svg>
                            </div>
                        </div>

                        <div class="flex-1 w-full">
                            <span class="block text-sm font-bold text-gray-700 mb-2 group-hover:text-blue-600">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ QR Code</span>
                            <p class="text-xs text-gray-500 mb-3">‡πÅ‡∏ï‡∏∞‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏¢‡πà‡∏≠‡∏£‡∏π‡∏õ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)</p>
                            
                            {{ form.payment_qr_image }}
                            
                            {% if form.payment_qr_image.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.payment_qr_image.errors.0 }}</p>
                            {% endif %}
                        </div>

                    </label> 
                </div>

                <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10 ‡∏£‡∏π‡∏õ)</h3>

                    {{ formset.management_form }}

                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-8">
                        {% for form in formset %}
                            <div class="hidden">
                                {{ form.id }}
                                {{ form.DELETE }} </div>

                            <div class="relative group w-full aspect-square">
                                
                                <label for="{{ form.image.id_for_label }}" class="cursor-pointer block w-full h-full relative rounded-xl border-2 border-dashed border-gray-300 hover:border-blue-500 overflow-hidden bg-gray-50 transition hover:shadow-md">
                                    
                                    <input type="file" 
                                        name="{{ form.image.html_name }}" 
                                        id="{{ form.image.id_for_label }}" 
                                        accept="image/*"
                                        class="hidden promo-file-input"
                                        data-index="{{ forloop.counter0 }}">

                                    <div class="w-full h-full absolute inset-0 z-10 {% if not form.instance.image %}hidden{% endif %}" id="preview-box-{{ forloop.counter0 }}">
                                        {% if form.instance.image %}
                                            <img src="{{ form.instance.image.url }}" class="w-full h-full object-cover">
                                        {% else %}
                                            <img src="" class="w-full h-full object-cover"> {% endif %}
                                    </div>

                                    <div class="w-full h-full flex flex-col items-center justify-center text-gray-400 group-hover:text-blue-500 transition z-0" id="placeholder-box-{{ forloop.counter0 }}">
                                        <span class="text-3xl mb-1">‚ûï</span>
                                        <span class="text-xs">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ</span>
                                    </div>
                                </label>

                                <button type="button" 
                                        onclick="deletePromoImage('{{ forloop.counter0 }}')"
                                        class="absolute top-2 right-2 z-20 bg-red-500 text-white p-1.5 rounded-full shadow-md hover:bg-red-600 transition opacity-0 group-hover:opacity-100 {% if not form.instance.image %}hidden{% endif %}"
                                        id="delete-btn-{{ forloop.counter0 }}">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </button>
                                
                                <div id="deleted-overlay-{{ forloop.counter0 }}" class="hidden absolute inset-0 z-30 bg-red-100/90 flex-col items-center justify-center text-red-600 rounded-xl border-2 border-red-500">
                                    <span class="font-bold text-sm">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏•‡∏ö</span>
                                    <button type="button" onclick="undoDelete('{{ forloop.counter0 }}')" class="mt-1 text-xs underline text-red-800">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                                </div>

                            </div>
                        {% endfor %}
                    </div>

                <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô & ‡∏†‡∏≤‡∏©‡∏µ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">VAT (%)</label>
                        {{ form.vat_percent }}
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Service Charge (%)</label>
                        {{ form.service_charge_percent }}
                    </div>
                </div>

                <div class="flex justify-end pt-4 border-t">
                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition transform active:scale-95">
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
                    </button>
                </div>
            </form>
        </div>
    </main>
</div>

<script>
    function setupImagePreview(inputId, previewId, placeholderId = null) {
        const input = document.getElementById(inputId); 
        const preview = document.getElementById(previewId);
        const placeholder = placeholderId ? document.getElementById(placeholderId) : null;

        if (input) {
            input.addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.src = e.target.result;
                        preview.classList.remove('opacity-50', 'hidden'); 
                        
                        if (placeholder) {
                            placeholder.classList.add('hidden');
                        }
                    }
                    reader.readAsDataURL(file);
                }
            });
        } else {
            // Debug: ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏Å‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏î‡∏π Console ‡∏ß‡πà‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô Error ‡∏ô‡∏µ‡πâ‡πÑ‡∏´‡∏°
            console.error("‚ùå ‡∏´‡∏≤ Input ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠: " + inputId); 
            console.log("‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö forms.py ‡∏ß‡πà‡∏≤‡∏°‡∏µ field ‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà");
        }
    }

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    // 1. Logo (field: image -> id_image)
    setupImagePreview('id_image', 'image-preview');

    // 2. QR Code (field: payment_qr_image -> id_payment_qr_image)
    setupImagePreview('id_payment_qr_image', 'qr-preview', 'qr-placeholder');


    // 1. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡πÇ‡∏ä‡∏ß‡πå Preview
    document.querySelectorAll('.promo-file-input').forEach(input => {
        input.addEventListener('change', function(e) {
            const index = this.dataset.index;
            const file = e.target.files[0];
            const previewBox = document.getElementById(`preview-box-${index}`);
            const deleteBtn = document.getElementById(`delete-btn-${index}`);
            const imgTag = previewBox.querySelector('img');

            if (file) {
                const reader = new FileReader();
                reader.onload = function(evt) {
                    imgTag.src = evt.target.result;
                    previewBox.classList.remove('hidden'); // ‡πÇ‡∏ä‡∏ß‡πå‡∏£‡∏π‡∏õ
                    deleteBtn.classList.remove('hidden'); // ‡πÇ‡∏ä‡∏ß‡πå‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
                }
                reader.readAsDataURL(file);
            }
        });
    });

    // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏π‡∏õ (‡∏Å‡∏î‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞)
    function deletePromoImage(index) {
        // ‡∏´‡∏≤ Elements ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
        const previewBox = document.getElementById(`preview-box-${index}`);
        const deleteBtn = document.getElementById(`delete-btn-${index}`);
        const input = document.getElementById(`id_promo_images-${index}-image`);
        const deleteCheckbox = document.getElementById(`id_promo_images-${index}-DELETE`);
        const overlay = document.getElementById(`deleted-overlay-${index}`);

        // ‡∏Å‡∏£‡∏ì‡∏µ A: ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (Saved Image)
        if (deleteCheckbox) {
            // ‡∏ï‡∏¥‡πä‡∏Å‡∏ñ‡∏π‡∏Å‡∏ó‡∏µ‡πà checkbox DELETE ‡∏Ç‡∏≠‡∏á Django
            deleteCheckbox.checked = true;
            // ‡πÇ‡∏ä‡∏ß‡πå Overlay ‡∏ß‡πà‡∏≤ "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏•‡∏ö"
            overlay.classList.remove('hidden');
        } 
        
        // ‡∏Å‡∏£‡∏ì‡∏µ B: ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ Save)
        else {
            // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡πà‡∏≤ input file
            input.value = ''; 
            // ‡∏ã‡πà‡∏≠‡∏ô Preview ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÇ‡∏ä‡∏ß‡πå Placeholder
            previewBox.classList.add('hidden');
            previewBox.querySelector('img').src = '';
            deleteBtn.classList.add('hidden');
        }
    }

    // 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏•‡∏ö (Undo)
    function undoDelete(index) {
        const deleteCheckbox = document.getElementById(`id_promo_images-${index}-DELETE`);
        const overlay = document.getElementById(`deleted-overlay-${index}`);
        
        if (deleteCheckbox) {
            deleteCheckbox.checked = false; // ‡πÄ‡∏≠‡∏≤‡∏ï‡∏¥‡πä‡∏Å‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å
            overlay.classList.add('hidden'); // ‡∏ã‡πà‡∏≠‡∏ô Overlay
        }
    }
</script>
{% endblock %}


=== templates/restaurants/menu_manage.html ===
{% extends "base.html" %}

{% block content %}
<div class="flex flex-col md:flex-row gap-6">
    <aside class="w-full md:w-64 bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-fit shrink-0">
        <div class="text-center mb-6">
            {% if restaurant.image %}
                <img src="{{ restaurant.image.url }}" 
                    alt="{{ restaurant.name }}" 
                    class="w-24 h-24 rounded-full mx-auto mb-3 object-cover border-4 border-blue-50 shadow-md">
            {% else %}
                <div class="w-24 h-24 bg-linear-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-3 text-4xl shadow-inner text-blue-500">
                    üè™
                </div>
            {% endif %}
            <h3 class="font-bold text-gray-800 text-lg mt-2">{{ restaurant.name }}</h3>
            <p class="text-xs text-gray-500">Owner Dashboard</p>
        </div>
        <nav class="space-y-1">
            <a href="{% url 'dashboard' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 font-bold rounded-lg transition">
                <span>üè†</span> ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
            </a>
            <a href="{% url 'menu_manage' %}" class="flex items-center  bg-blue-50 text-blue-700 gap-3 px-4 py-3  rounded-lg transition">
                <span>üçΩÔ∏è</span> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π
            </a>
            <a href="{% url 'table_list' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üé´</span> ‡πÇ‡∏ï‡πä‡∏∞ & QR Code
            </a>
            <a href="{% url 'kitchen_dashboard' %}" target="_blank" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üë®‚Äçüç≥</span> ‡∏à‡∏≠‡∏Ñ‡∏£‡∏±‡∏ß (KDS)
            </a>
            <a href="{% url 'cashier_dashboard' %}" target="_blank" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üñ•Ô∏è</span> ‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå (POS)
            </a>
            
            <a href="{% url 'report_sales' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üìä</span> ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
            </a>
            <div class="border-t my-2"></div>
            <a href="{% url 'restaurant_settings' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>‚öôÔ∏è</span> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
            </a>

            <a href="{% url 'customer_display' restaurant.slug %}" target="_blank" onclick="openCustomerWindow(event, this.href)" class="flex items-center gap-3 p-4 bg-purple-600 text-white rounded-xl shadow-lg hover:bg-purple-700 transition transform hover:scale-105 mt-4">
                
                <div class="p-3 bg-white/20 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                </div>
                
                <div>
                    <h3 class="font-bold text-lg">‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≠‡∏ù‡∏±‡πà‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    <p class="text-sm text-purple-200">Customer Display Screen</p>
                </div>
            </a>
        </nav>
    </aside>

    <main class="flex-1">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
            <div class="space-x-2">
                <a href="{% url 'add_category' %}" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded font-bold">+ ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</a>
                <a href="{% url 'add_menu_item' %}" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded font-bold">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</a>
            </div>
        </div>

        {% for category in categories %}
        <div class="bg-white rounded-lg shadow mb-6 overflow-hidden">
            <div class="bg-gray-100 px-6 py-3 border-b flex justify-between items-center group">
                <div>
                    <h3 class="font-bold text-lg text-gray-900 inline">{{ category.name }}</h3>
                    <span class="text-xs text-gray-500 ml-2">‡∏•‡∏≥‡∏î‡∏±‡∏ö: {{ category.order }}</span>
                </div>
                <div class="flex items-center space-x-2">
                    <a href="{% url 'edit_category' category.id %}" class="text-gray-400 hover:text-blue-600 text-sm">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠</a>
                    <form method="post" action="{% url 'delete_category' category.id %}" onsubmit="return confirm('‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà ‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î! ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô?');" class="inline">
                        {% csrf_token %}
                        <button type="submit" class="text-gray-400 hover:text-red-600 text-sm">‡∏•‡∏ö</button>
                    </form>
                </div>
            </div>

            <div class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for item in category.items.all %}
                <div class="flex flex-col border p-3 rounded hover:shadow-md transition bg-white relative h-full">
                    
                    <div class="flex gap-4 mb-2">
                        <div class="w-20 h-20 bg-gray-200 rounded overflow-hidden shrink-0">
                            {% if item.image %}
                                <img src="{{ item.image.url }}" class="w-full h-full object-cover">
                            {% else %}
                                <div class="flex items-center justify-center h-full text-gray-400 text-xs">No Image</div>
                            {% endif %}
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800">{{ item.name }}</h4>
                            <p class="text-green-600 font-bold">‡∏ø{{ item.price }}</p>
                            
                            <div class="mt-1">
                                {% if not item.is_available %}
                                    <span class="inline-block text-[10px] bg-red-100 text-red-600 px-2 py-0.5 rounded-full">‡∏´‡∏°‡∏î</span>
                                {% else %}
                                    <span class="inline-block text-[10px] bg-green-100 text-green-600 px-2 py-0.5 rounded-full">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏≤‡∏¢</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <p class="text-xs text-gray-500 mb-4 line-clamp-2 min-h-[2.5em]">
                        {{ item.description|default:"-" }}
                    </p>

                    <div class="mt-auto flex gap-2 pt-3 border-t">
                        <a href="{% url 'edit_menu_item' item.id %}" class="flex-1 text-center bg-blue-50 text-blue-600 hover:bg-blue-100 py-1.5 rounded text-sm font-medium transition">
                            ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </a>
                        
                        <form method="post" action="{% url 'delete_menu_item' item.id %}" onsubmit="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π {{ item.name }}?');" class="flex-1">
                            {% csrf_token %}
                            <button type="submit" class="w-full bg-red-50 text-red-600 hover:bg-red-100 py-1.5 rounded text-sm font-medium transition">
                                üóëÔ∏è ‡∏•‡∏ö
                            </button>
                        </form>
                    </div>

                </div>
                {% empty %}
                <p class="text-gray-400 text-sm col-span-full text-center py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ</p>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </main>
</div>
{% endblock %}


=== templates/restaurants/report_sales.html ===
{% extends "base.html" %}

{% block content %}
<div class="flex flex-col md:flex-row gap-6">
    <aside class="w-full md:w-64 bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-fit shrink-0">
        <div class="text-center mb-6">
            {% if restaurant.image %}
                <img src="{{ restaurant.image.url }}" 
                    alt="{{ restaurant.name }}" 
                    class="w-24 h-24 rounded-full mx-auto mb-3 object-cover border-4 border-blue-50 shadow-md">
            {% else %}
                <div class="w-24 h-24 bg-linear-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-3 text-4xl shadow-inner text-blue-500">
                    üè™
                </div>
            {% endif %}
            <h3 class="font-bold text-gray-800 text-lg mt-2">{{ restaurant.name }}</h3>
            <p class="text-xs text-gray-500">Owner Dashboard</p>
        </div>
        <nav class="space-y-1">
            <a href="{% url 'dashboard' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 font-bold rounded-lg transition">
                <span>üè†</span> ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
            </a>
            <a href="{% url 'menu_manage' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üçΩÔ∏è</span> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π
            </a>
            <a href="{% url 'table_list' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üé´</span> ‡πÇ‡∏ï‡πä‡∏∞ & QR Code
            </a>
            <a href="{% url 'kitchen_dashboard' %}" target="_blank" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üë®‚Äçüç≥</span> ‡∏à‡∏≠‡∏Ñ‡∏£‡∏±‡∏ß (KDS)
            </a>
            <a href="{% url 'cashier_dashboard' %}" target="_blank" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>üñ•Ô∏è</span> ‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå (POS)
            </a>
            
            <a href="{% url 'report_sales' %}" class="flex items-center gap-3 px-4 py-3 bg-blue-50 text-blue-700 rounded-lg transition">
                <span>üìä</span> ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
            </a>
            <div class="border-t my-2"></div>
            <a href="{% url 'restaurant_settings' %}" class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition">
                <span>‚öôÔ∏è</span> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
            </a>

            <a href="{% url 'customer_display' restaurant.slug %}" target="_blank" onclick="openCustomerWindow(event, this.href)" class="flex items-center gap-3 p-4 bg-purple-600 text-white rounded-xl shadow-lg hover:bg-purple-700 transition transform hover:scale-105 mt-4">
                
                <div class="p-3 bg-white/20 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                </div>
                
                <div>
                    <h3 class="font-bold text-lg">‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≠‡∏ù‡∏±‡πà‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    <p class="text-sm text-purple-200">Customer Display Screen</p>
                </div>
            </a>
        </nav>
    </aside>

    <main class="flex-1">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</h2>

        <div class="bg-linear-to-r from-green-500 to-emerald-600 rounded-xl shadow-lg p-6 text-white mb-8">
            <h3 class="text-lg opacity-90">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
            <p class="text-4xl font-bold mt-2">‡∏ø{{ today_sales|floatformat:2 }}</p>
        </div>

        <div class="bg-white rounded-xl shadow overflow-hidden">
            <div class="px-6 py-4 border-b">
                <h3 class="font-bold text-gray-700">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 7 ‡∏ß‡∏±‡∏ô</h3>
            </div>
            <table class="w-full">
                <thead class="bg-gray-50 text-gray-500 text-sm">
                    <tr>
                        <th class="px-6 py-3 text-left">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                        <th class="px-6 py-3 text-center">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</th>
                        <th class="px-6 py-3 text-right">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100">
                    {% for day in daily_sales %}
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-gray-800">{{ day.date|date:"d M Y" }}</td>
                        <td class="px-6 py-4 text-center text-gray-800">{{ day.count }}</td>
                        <td class="px-6 py-4 text-right font-bold text-green-600">‡∏ø{{ day.total|floatformat:2 }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3" class="px-6 py-8 text-center text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </main>
</div>
{% endblock %}


=== templates/restaurants/form_generic.html ===
{% extends "base.html" %}

{% block content %}

<div class="max-w-lg mx-auto bg-white p-8 rounded-lg shadow-lg mt-10">
    <h2 class="text-2xl font-bold mb-6 text-gray-800">{{ title }}</h2>
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        {% for field in form %}
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">
                {{ field.label }}
            </label>
            
            <div class="text-gray-800 [&_a]:text-blue-600 hover:[&_a]:underline">
                {{ field }}
            </div>
            {% if field.errors %}
                <p class="text-red-500 text-xs italic mt-1">{{ field.errors.0 }}</p>
            {% endif %}
        </div>
        {% endfor %}

        <div class="flex justify-between mt-6">
            <a href="{% url 'menu_manage' %}" class="text-gray-500 hover:text-gray-700 py-2 px-4">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</a>
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded">
                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            </button>
        </div>
    </form>
</div>
{% endblock %}


=== templates/superuser/dashboard.html ===
{% extends "base.html" %}

{% block content %}
<div class="min-h-screen bg-gray-50 pb-10">
    
    <div class="bg-indigo-900 text-white shadow-lg sticky top-0 z-30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center h-auto md:h-20 py-4 gap-4">
                
                <div class="flex items-center gap-3">
                    <div class="bg-indigo-800 p-2 rounded-lg">
                        <span class="text-2xl">üõ°Ô∏è</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold leading-tight">Super Admin Control</h1>
                        <p class="text-indigo-200 text-xs">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</p>
                    </div>
                </div>
                
                <div class="w-full md:w-auto">
                    <form method="get" class="relative group">
                        <input type="text" 
                               name="q" 
                               value="{{ search_query }}" 
                               placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤, ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á..." 
                               class="w-full md:w-80 pl-10 pr-4 py-2 bg-indigo-800 border border-indigo-700 rounded-lg text-white placeholder-indigo-300 focus:bg-white focus:text-gray-900 focus:ring-2 focus:ring-indigo-400 focus:outline-none transition-all duration-300 shadow-sm">
                        
                        <span class="absolute left-3 top-2.5 text-indigo-300 group-focus-within:text-gray-500 transition-colors duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </span>

                        {% if search_query %}
                        <a href="{% url 'superuser_dashboard' %}" class="absolute right-3 top-2.5 text-indigo-300 hover:text-white group-focus-within:text-gray-400 group-focus-within:hover:text-red-500">
                            ‚úï
                        </a>
                        {% endif %}
                    </form>
                </div>

            </div>
        </div>
    </div>
    

    <div class="max-w-7xl mx-auto px-6 mt-2.5">
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-indigo-500">
                <p class="text-gray-500 text-xs uppercase font-bold">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                <h3 class="text-3xl font-bold text-gray-800">{{ stats.total }}</h3>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-green-500">
                <p class="text-gray-500 text-xs uppercase font-bold">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (Active)</p>
                <h3 class="text-3xl font-bold text-green-600">{{ stats.active }}</h3>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-red-500">
                <p class="text-gray-500 text-xs uppercase font-bold">‡∏ñ‡∏π‡∏Å‡∏£‡∏∞‡∏á‡∏±‡∏ö (Banned)</p>
                <h3 class="text-3xl font-bold text-red-600">{{ stats.inactive }}</h3>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-purple-500">
                <p class="text-gray-500 text-xs uppercase font-bold">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
                <h3 class="text-3xl font-bold text-purple-600">{{ stats.users }}</h3>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-100">
            <div class="p-6 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center">
                <h3 class="font-bold text-gray-700">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                {% if search_query %}
                <a href="{% url 'superuser_dashboard' %}" class="text-xs text-red-500 hover:underline">‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</a>
                {% endif %}
            </div>

            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead class="bg-gray-100 text-gray-600 text-xs uppercase tracking-wider">
                        <tr>
                            <th class="p-4 font-semibold">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th class="p-4 font-semibold">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</th>
                            <th class="p-4 font-semibold text-center">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£</th>
                            <th class="p-4 font-semibold text-center">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                            <th class="p-4 font-semibold text-right">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100 text-sm">
                        {% for shop in restaurants %}
                        <tr class="hover:bg-blue-50 transition duration-150">
                            <td class="p-4">
                                <div class="flex items-center gap-3">
                                    {% if shop.image %}
                                        <img src="{{ shop.image.url }}" class="w-10 h-10 rounded-full object-cover border">
                                    {% else %}
                                        <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold">
                                            {{ shop.name|slice:":1" }}
                                        </div>
                                    {% endif %}
                                    <div>
                                        <div class="font-bold text-gray-800">{{ shop.name }}</div>
                                        <div class="text-xs text-gray-500">{{ shop.phone }}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <div class="font-medium text-gray-700">{{ shop.owner.username }}</div>
                                <div class="text-xs text-gray-400">{{ shop.owner.email }}</div>
                            </td>
                            <td class="p-4 text-center text-gray-500">
                                {{ shop.created_at|date:"d M Y" }}
                            </td>
                            <td class="p-4 text-center">
                                {% if shop.is_active %}
                                    <span class="inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        <span class="w-2 h-2 bg-green-500 rounded-full"></span> Active
                                    </span>
                                {% else %}
                                    <span class="inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        <span class="w-2 h-2 bg-red-500 rounded-full"></span> Banned
                                    </span>
                                {% endif %}
                            </td>
                            <td class="p-4 text-right">
                                <a href="{% url 'toggle_restaurant_active' shop.id %}" 
                                   class="inline-block px-4 py-2 rounded-lg text-xs font-bold transition shadow-sm border
                                   {% if shop.is_active %}
                                        bg-white text-red-500 border-red-200 hover:bg-red-50
                                   {% else %}
                                        bg-green-600 text-white border-green-600 hover:bg-green-700
                                   {% endif %}">
                                    {% if shop.is_active %}
                                        ‚õî ‡∏£‡∏∞‡∏á‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
                                    {% else %}
                                        ‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ / ‡πÄ‡∏õ‡∏¥‡∏î
                                    {% endif %}
                                </a>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" class="p-8 text-center text-gray-400">
                                ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}


=== templates/users/approval_pending.html ===
{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl mt-10 p-8 text-center">
    <div class="uppercase tracking-wide text-sm text-indigo-500 font-semibold">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>
    <h1 class="block mt-1 text-lg leading-tight font-medium text-black">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h1>
    <p class="mt-2 text-gray-500">
        ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô RPOS <br>
        ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å Admin <br>
        ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß
    </p>
    <div class="mt-6">
        <span class="inline-block bg-yellow-100 text-yellow-800 text-xs px-2 rounded-full uppercase font-semibold tracking-wide">Pending Approval</span>
    </div>
</div>
{% endblock %}


=== templates/dining/session_expired.html ===
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ - {{ restaurant.name }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 h-screen flex flex-col items-center justify-center p-4">
    <div class="bg-white p-8 rounded-2xl shadow-xl text-center max-w-sm w-full">
        <div class="mb-6 bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto">
            <span class="text-4xl">üôè</span>
        </div>
        
        <h1 class="text-2xl font-bold text-gray-800 mb-2">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h1>
        <p class="text-gray-500 mb-6">
            ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô<br>‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß
        </p>

        <div class="border-t border-gray-100 pt-6">
            <p class="text-sm text-gray-400">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°?</p>
            <p class="text-sm text-blue-600 font-bold mt-1">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
        </div>
    </div>
</body>
</html>


=== templates/dining/menu_public.html ===
{% extends "base.html" %}
{% load static %}

{% block content %}
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

<div x-data="foodMenu()" class="pb-24"> <div class="bg-white shadow sticky top-0 z-10 p-4 flex justify-between items-center">
        <div>
            <h1 class="font-bold text-lg text-gray-800">{{ restaurant.name }}</h1>
            <p class="text-xs text-gray-500">‡πÇ‡∏ï‡πä‡∏∞: <span class="font-bold text-blue-600">{{ table.name }}</span></p>
        </div>
        <button @click="showCart = true" class="relative bg-blue-100 text-blue-600 p-2 rounded-full">
            üõí
            <span x-show="cartTotalItems() > 0" x-text="cartTotalItems()" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-white"></span>
        </button>
    </div>

    <div class="p-4 space-y-8">
        {% for category in categories %}
        <div id="cat-{{ category.id }}">
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-l-4 border-blue-500 pl-3">{{ category.name }}</h2>
            
            <div class="space-y-4">
                {% for item in category.items.all %}
                {% if item.is_available %}
                <div class="bg-white p-3 rounded-lg shadow-sm flex gap-3 border border-gray-100">
                    <div class="w-24 h-24 bg-gray-200 rounded-md overflow-hidden shrink-0 relative">
                        {% if item.image %}
                            <img src="{{ item.image.url }}" class="w-full h-full object-cover">
                        {% else %}
                            <div class="w-full h-full flex items-center justify-center text-gray-400 text-xs">No img</div>
                        {% endif %}
                    </div>
                    
                    <div class="flex-1 flex flex-col justify-between">
                        <div>
                            <h3 class="font-bold text-gray-800">{{ item.name }}</h3>
                            <p class="text-xs text-gray-500 line-clamp-1">{{ item.description }}</p>
                        </div>
                        <div class="flex justify-between items-end mt-2">
                            <span class="font-bold text-green-600">‡∏ø{{ item.price }}</span>
                            
                            <button @click="addToCart({{ item.id }}, '{{ item.name|escapejs }}', {{ item.price }})" 
                                    class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow hover:bg-blue-700 active:scale-95 transition">
                                + ‡πÄ‡∏û‡∏¥‡πà‡∏°
                            </button>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>

    <div 
        x-show="showCart" 
        style="display: none;" 
        class="fixed inset-0 z-50 flex items-end justify-center sm:items-center"
    >
        
        <div 
            x-show="showCart"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            @click="showCart = false"
            class="absolute inset-0 bg-gray-600/30 backdrop-blur-sm transition-opacity"
        ></div>
        
        <div 
            x-show="showCart"
            x-transition:enter="transition ease-out duration-300 transform"
            x-transition:enter-start="translate-y-full sm:translate-y-10 sm:scale-95 opacity-0"
            x-transition:enter-end="translate-y-0 sm:scale-100 opacity-100"
            x-transition:leave="transition ease-in duration-200 transform"
            x-transition:leave-start="translate-y-0 sm:scale-100 opacity-100"
            x-transition:leave-end="translate-y-full sm:translate-y-10 sm:scale-95 opacity-0"
            class="relative w-full max-w-lg bg-white rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[85vh]"
        >
            
            <div class="flex justify-center pt-3 pb-1 bg-white" @click="showCart = false">
                <div class="w-12 h-1.5 bg-gray-300 rounded-full cursor-pointer"></div>
            </div>

            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white">
                <div>
                    <h2 class="text-xl font-bold text-gray-800">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                    <p class="text-sm text-gray-500">‡πÇ‡∏ï‡πä‡∏∞: {{ table.name }}</p>
                </div>
                <button @click="showCart = false" class="p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <div class="flex-1 overflow-y-auto p-6 bg-slate-50 space-y-3">
                <template x-if="cart.length === 0">
                    <div class="flex flex-col items-center justify-center h-48 text-gray-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mb-2 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>
                    </div>
                </template>

                <template x-for="(item, index) in cart" :key="index">
                    <div class="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                        <div>
                            <p class="font-bold text-gray-800 text-lg" x-text="item.name"></p>
                            <p class="text-sm text-blue-600 font-medium">‡∏ø<span x-text="item.price"></span></p>
                        </div>
                        <div class="flex items-center gap-4 bg-gray-50 p-1 rounded-lg border border-gray-200">
                            <button @click="decreaseQty(index)" class="w-8 h-8 flex items-center justify-center rounded-md bg-white text-gray-600 shadow-sm hover:text-red-500 font-bold transition">-</button>
                            <span class="font-bold w-4 text-center text-gray-800" x-text="item.qty"></span>
                            <button @click="increaseQty(index)" class="w-8 h-8 flex items-center justify-center rounded-md bg-white text-blue-600 shadow-sm hover:bg-blue-50 font-bold transition">+</button>
                        </div>
                    </div>
                </template>
            </div>

            <div class="p-6 bg-white border-t border-gray-100 shadow-[0_-5px_15px_rgba(0,0,0,0.05)]">
                <div class="flex justify-between text-lg font-bold mb-4 items-end">
                    <span class="text-gray-600">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</span>
                    <span class="text-2xl text-blue-600">‡∏ø<span x-text="cartTotalAmount()"></span></span>
                </div>
                <button 
                    @click="submitOrder()"
                    :disabled="cart.length === 0"
                    class="w-full bg-linear-to-r from-blue-600 to-indigo-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£
                </button>
            </div>
        </div>
    </div>

</div>

<script>
    function foodMenu() {
        return {
            showCart: false,
            cart: [], // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö [{id, name, price, qty}, ...]

            addToCart(id, name, price) {
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
                let existingItem = this.cart.find(item => item.id === id);
                if (existingItem) {
                    existingItem.qty++;
                } else {
                    this.cart.push({ id: id, name: name, price: price, qty: 1 });
                }
                // ‡∏™‡∏±‡πà‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (Haptic) ‡∏ñ‡πâ‡∏≤ browser ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
                if (navigator.vibrate) navigator.vibrate(50);
            },

            increaseQty(index) {
                this.cart[index].qty++;
            },

            decreaseQty(index) {
                if (this.cart[index].qty > 1) {
                    this.cart[index].qty--;
                } else {
                    this.cart.splice(index, 1); // ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 0
                }
            },

            cartTotalItems() {
                return this.cart.reduce((total, item) => total + item.qty, 0);
            },

            cartTotalAmount() {
                return this.cart.reduce((total, item) => total + (item.price * item.qty), 0).toFixed(2);
            },

            submitOrder() {
                if(this.cart.length === 0) return;
                if(!confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£?')) return;

                // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                const payload = {
                    table_uuid: '{{ table.uuid }}', // ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å Django Template ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
                    cart: this.cart
                };

                // ‡∏¢‡∏¥‡∏á Request ‡πÑ‡∏õ‡∏´‡∏≤ API ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á
                fetch('/orders/api/create/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏≠‡∏≤ csrf_exempt ‡∏≠‡∏≠‡∏Å ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ:
                        // 'X-CSRFToken': '{{ csrf_token }}' 
                    },
                    body: JSON.stringify(payload)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå: #' + data.order_id);
                        this.cart = []; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                        this.showCart = false;
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + data.error);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                });
            }
        }
    }
</script>
{% endblock %}


=== templates/account/email_confirm.html ===
{% extends "base.html" %}

{% block content %}
<div class="min-h-[70vh] flex items-center justify-center px-4">
    <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center border border-gray-100">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•</h2>

        {% if confirmation %}
            <p class="text-gray-600 mb-6">
                ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡∏π‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏• <span class="font-bold text-gray-800">{{ confirmation.email_address.email }}</span> <br>‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            </p>

            <form method="post" action="{% url 'account_confirm_email' confirmation.key %}">
                {% csrf_token %}
                <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl shadow-lg transition transform active:scale-95">
                    ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•
                </button>
            </form>
        {% else %}
            <div class="bg-red-50 text-red-600 p-4 rounded-lg mb-6">
                ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß
            </div>
            <a href="{% url 'account_login' %}" class="w-full block bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition">
                ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </a>
        {% endif %}
    </div>
</div>
{% endblock %}


=== templates/account/password_reset.html ===
{% extends "base.html" %}

{% block content %}
<div class="min-h-[70vh] flex items-center justify-center px-4">
    <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8 border border-gray-100">
        <div class="text-center mb-6">
            <div class="mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4">
                <span class="text-3xl">üîë</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-900">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</h2>
            <p class="text-gray-500 mt-2 text-sm">
                ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏á‡∏ß‡∏• ‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á <br>‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÉ‡∏´‡πâ
            </p>
        </div>

        <form method="POST" action="{% url 'account_reset_password' %}" class="space-y-6">
            {% csrf_token %}
            
            <div class="space-y-4 text-gray-800
                [&_label]:block [&_label]:text-sm [&_label]:font-medium [&_label]:text-gray-700 [&_label]:mb-1
                [&_input]:w-full [&_input]:px-4 [&_input]:py-3 [&_input]:rounded-lg [&_input]:border [&_input]:border-gray-300 [&_input]:focus:ring-2 [&_input]:focus:ring-blue-500 [&_input]:outline-none">
                
                {{ form.as_p }}
            </div>

            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-md transition">
                ‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
            </button>
        </form>

        <div class="mt-6 text-center">
            <a href="{% url 'account_login' %}" class="text-sm text-gray-500 hover:text-gray-800">
                &larr; ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </a>
        </div>
    </div>
</div>
{% endblock %}


=== templates/account/login.html ===
{% extends "base.html" %}

{% block content %}
<div class="min-h-[70vh] flex items-center justify-center">
    <div class="max-w-md w-full bg-white rounded-xl shadow-2xl overflow-hidden p-8">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-gray-800">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤</h2>
            <p class="text-gray-500 mt-2">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        </div>

        <form class="login" method="POST" action="{% url 'account_login' %}">
            {% csrf_token %}
            
            {% if form.errors %}
                <div class="bg-red-50 text-red-600 p-3 rounded mb-4 text-sm text-center">
                    ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                </div>
            {% endif %}

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <input type="email" name="login" placeholder="name@company.com" required
                           class="w-full px-4 py-3 text-gray-800 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required
                           class="w-full px-4 text-gray-800 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                </div>
            </div>

            <div class="flex items-center justify-between mt-4 mb-6">
                <label class="flex items-center text-sm text-gray-600">
                    <input type="checkbox" name="remember" class="mr-2 rounded text-blue-600"> ‡∏à‡∏î‡∏à‡∏≥‡∏â‡∏±‡∏ô‡πÑ‡∏ß‡πâ
                </label>
                <a href="{% url 'account_reset_password' %}" class="text-sm text-blue-600 hover:underline">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</a>
            </div>

            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg transition transform active:scale-95">
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </button>
        </form>

        <div class="mt-6 text-center text-sm text-gray-600">
            ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? 
            <a href="{% url 'account_signup' %}" class="text-blue-600 font-bold hover:underline">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏•‡∏¢</a>
        </div>
    </div>
</div>
{% endblock %}


=== templates/account/verification_sent.html ===
{% extends "base.html" %}

{% block content %}
<div class="min-h-[70vh] flex items-center justify-center px-4">
    <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center border border-gray-100">
        <div class="mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6">
            <span class="text-4xl">üì©</span>
        </div>
        
        <h2 class="text-2xl font-bold text-gray-900 mb-4">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
        <p class="text-gray-600 mb-6 leading-relaxed">
            ‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß <br>
            ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ
        </p>

        <div class="bg-blue-50 p-4 rounded-lg text-sm text-blue-800 mb-6">
            <span class="font-bold">‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•?</span> ‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Spam/Junk ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏™‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        </div>

        <a href="{% url 'account_login' %}" class="inline-block text-blue-600 font-bold hover:underline">
            ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
        </a>
    </div>
</div>
{% endblock %}


=== templates/account/logout.html ===
{% extends "base.html" %}

{% block content %}
<div class="min-h-[60vh] flex items-center justify-center px-4">
    <div class="max-w-sm w-full bg-white rounded-2xl shadow-xl p-8 text-center border border-gray-100">
        <div class="mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4">
            <span class="text-3xl">üëã</span>
        </div>
        
        <h2 class="text-2xl font-bold text-gray-900 mb-2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</h2>
        <p class="text-gray-500 mb-8">‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?</p>

        <form method="post" action="{% url 'account_logout' %}" class="flex flex-col gap-3">
            {% csrf_token %}
            <button type="submit" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-xl shadow-md transition transform active:scale-95">
                ‡πÉ‡∏ä‡πà, ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
            </button>
            
            <a href="{% url 'dashboard' %}" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-3 rounded-xl transition">
                ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
            </a>
        </form>
    </div>
</div>
{% endblock %}


=== templates/account/signup.html ===
{% extends "base.html" %}

{% block content %}
<div class="min-h-[80vh] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden p-8 border border-gray-100">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-gray-900">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà</h2>
            <p class="text-gray-500 mt-2">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        </div>

        <form class="signup space-y-6" id="signup_form" method="post" action="{% url 'account_signup' %}">
            {% csrf_token %}

            {% if form.errors %}
                {% for field in form %}
                    {% for error in field.errors %}
                        <div class="bg-red-50 text-red-600 p-3 rounded-lg text-sm flex items-center gap-2">
                            ‚ö†Ô∏è {{ error }}
                        </div>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                    <div class="bg-red-50 text-red-600 p-3 rounded-lg text-sm flex items-center gap-2">
                        ‚ö†Ô∏è {{ error }}
                    </div>
                {% endfor %}
            {% endif %}

            <div class="space-y-4 text-gray-700 text-sm
                [&_label]:block [&_label]:text-sm [&_label]:font-medium [&_label]:text-gray-700 [&_label]:mb-1
                [&_input]:w-full [&_input]:px-4 [&_input]:py-3 [&_input]:rounded-lg [&_input]:border [&_input]:border-gray-300 [&_input]:focus:ring-2 [&_input]:focus:ring-blue-500 [&_input]:focus:border-blue-500 [&_input]:transition [&_input]:outline-none
                [&_span.help-text]:text-xs [&_span.help-text]:text-gray-500 [&_span.help-text]:mt-1 [&_span.help-text]:block">
                
                {% for field in form %}
                    <div>
                        {{ field.label_tag }}
                        {{ field }}

                        {# ‚ùå ‡πÑ‡∏°‡πà render help_text #}

                        {% if field.errors %}
                            <p class="text-red-500 text-xs">{{ field.errors.0 }}</p>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>

            <button type="submit" class="w-full bg-linear-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 rounded-xl shadow-lg transform transition hover:-translate-y-0.5 active:scale-95">
                ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
            </button>
        </form>

        <div class="mt-6 text-center text-sm text-gray-600">
            ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß? 
            <a href="{% url 'account_login' %}" class="text-blue-600 font-bold hover:underline">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
        </div>
    </div>
</div>
{% endblock %}


=== dining/models.py ===
from django.db import models

# Create your models here.



=== dining/__init__.py ===



=== dining/apps.py ===
from django.apps import AppConfig


class DiningConfig(AppConfig):
    name = 'dining'



=== dining/admin.py ===
from django.contrib import admin

# Register your models here.



=== dining/tests.py ===
from django.test import TestCase

# Create your tests here.



=== dining/urls.py ===
# dining/urls.py
from django.urls import path
from . import views

urlpatterns = [
    # ‡πÄ‡∏ä‡πà‡∏ô dining/my-coffee-shop/uuid-1234/
    path('<slug:shop_slug>/<uuid:table_uuid>/', views.dining_menu, name='dining_menu'),
]


=== dining/views.py ===
# dining/views.py
from django.shortcuts import render, get_object_or_404, redirect
from restaurants.models import Restaurant, Table, MenuItem
from django.db.models import Prefetch

def dining_menu(request, shop_slug, table_uuid):
    # 1. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡∏£‡πâ‡∏≤‡∏ô ‡πÉ‡∏´‡πâ 404 ‡πÑ‡∏õ‡πÄ‡∏•‡∏¢ ‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)
    restaurant = get_object_or_404(Restaurant, slug=shop_slug, is_active=True)

    # 2. ‚≠ê ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏ï‡πä‡∏∞‡∏î‡πâ‡∏ß‡∏¢ UUID (‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)
    try:
        table = Table.objects.get(uuid=table_uuid, restaurant=restaurant)
    except Table.DoesNotExist:
        # ‚ö†Ô∏è ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤ UUID ‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (‡∏õ‡∏¥‡∏î‡πÇ‡∏ï‡πä‡∏∞‡πÅ‡∏•‡πâ‡∏ß)
        # ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ / ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì" ‡πÅ‡∏ó‡∏ô
        return render(request, 'dining/session_expired.html', {
            'restaurant': restaurant
        })

    # 3. ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Session
    request.session['dining_table_id'] = table.id
    request.session['dining_restaurant_id'] = restaurant.id
    
    # 4. ‡∏î‡∏∂‡∏á‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Query ‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢)
    # ‡πÉ‡∏ä‡πâ Prefetch ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ item ‡∏ó‡∏µ‡πà is_available=True ‡∏°‡∏≤‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ‡πÄ‡∏•‡∏¢
    # (‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ô loop ‡πÉ‡∏ô template ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ if item.is_available ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö ‡πÅ‡∏•‡∏∞‡∏•‡∏î query)
    items_prefetch = Prefetch('items', queryset=MenuItem.objects.filter(is_available=True))
    
    categories = restaurant.categories.filter(items__is_available=True)\
        .prefetch_related(items_prefetch)\
        .distinct()
    
    context = {
        'restaurant': restaurant,
        'table': table,
        'categories': categories,
    }
    return render(request, 'dining/menu_public.html', context)


=== orders/models.py ===
# orders/models.py
from django.db import models

class Order(models.Model):
    STATUS_CHOICES = [
        ('PENDING', '‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå'),
        ('COOKING', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∏‡∏á'),
        ('SERVED', '‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡πÅ‡∏•‡πâ‡∏ß'),
        ('COMPLETED', '‡∏ó‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à/‡πÄ‡∏ä‡πá‡∏Ñ‡∏ö‡∏¥‡∏•'),
        ('CANCELLED', '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'),
    ]

    # ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏Ç‡πâ‡∏≤‡∏° App ‡πÉ‡∏ä‡πâ string 'app_name.ModelName'
    restaurant = models.ForeignKey('restaurants.Restaurant', on_delete=models.CASCADE, related_name='orders')
    table = models.ForeignKey('restaurants.Table', on_delete=models.SET_NULL, null=True, related_name='orders')
    
    session_id = models.CharField(max_length=100, blank=True)
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='PENDING')
    total_price = models.DecimalField(max_digits=10, decimal_places=2, default=0.00)
    is_paid = models.BooleanField(default=False) 
    
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    def __str__(self):
        return f"Order #{self.id}"

class OrderItem(models.Model):
    order = models.ForeignKey(Order, on_delete=models.CASCADE, related_name='items')
    menu_item = models.ForeignKey('restaurants.MenuItem', on_delete=models.PROTECT) # ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏°‡∏ô‡∏π
    
    quantity = models.PositiveIntegerField(default=1)
    price = models.DecimalField(max_digits=10, decimal_places=2) 
    note = models.CharField(max_length=255, blank=True, verbose_name="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏")
    
    def __str__(self):
        return f"{self.menu_item.name} x {self.quantity}"
        
    @property
    def total_cost(self):
        return self.price * self.quantity


=== orders/consumers.py ===
import json
import traceback
from channels.generic.websocket import AsyncWebsocketConsumer

class OrderConsumer(AsyncWebsocketConsumer):
    
    # ------------------------------------------------------------------
    # 1. CONNECT: ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
    # ------------------------------------------------------------------
    async def connect(self):
        print("üîµ Attempting to connect...")
        try:
            self.restaurant_id = self.scope['url_route']['kwargs']['restaurant_id']
            self.room_group_name = f'restaurant_{self.restaurant_id}'

            # Join room group
            await self.channel_layer.group_add(
                self.room_group_name,
                self.channel_name
            )

            await self.accept()
            print(f"‚úÖ Client Connected to Group: {self.room_group_name}")

        except Exception as e:
            print("‚ùå Error in connect:", e)
            await self.close()

    # ------------------------------------------------------------------
    # 2. DISCONNECT: ‡∏ï‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
    # ------------------------------------------------------------------
    async def disconnect(self, close_code):
        try:
            await self.channel_layer.group_discard(
                self.room_group_name,
                self.channel_name
            )
            print(f"üî¥ Client Disconnected from {self.room_group_name}")
        except:
            pass

    # ------------------------------------------------------------------
    # 3. RECEIVE: ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å JS (Cashier) -> ‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ Group
    # ------------------------------------------------------------------
    async def receive(self, text_data):
        print(f"üì© Received Message from Client: {text_data}") # <--- ‡∏î‡∏π Log ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
        
        try:
            data = json.loads(text_data)
            command = data.get('command')

            # ‡∏Å‡∏£‡∏ì‡∏µ 1: ‡∏™‡∏±‡πà‡∏á‡πÇ‡∏ä‡∏ß‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô
            if command == 'show_customer_payment':
                print(f"üì¢ Broadcasting 'show_customer_payment' to group {self.room_group_name}")
                await self.channel_layer.group_send(
                    self.room_group_name,
                    {
                        'type': 'show_customer_payment', # ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ò‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡∏Ç‡πâ‡∏≠ 4.1)
                        'items': data.get('items', []),
                        'total': data.get('total', '0.00')
                    }
                )

            # ‡∏Å‡∏£‡∏ì‡∏µ 2: ‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
            elif command == 'hide_customer_payment':
                print(f"üì¢ Broadcasting 'hide_customer_payment' to group {self.room_group_name}")
                await self.channel_layer.group_send(
                    self.room_group_name,
                    {
                        'type': 'hide_customer_payment' # ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ò‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡∏Ç‡πâ‡∏≠ 4.2)
                    }
                )

        except Exception as e:
            print("‚ùå Error processing message:", e)
            traceback.print_exc()

    # ------------------------------------------------------------------
    # 4. HANDLERS: ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å Group -> ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà JS (Customer Display)
    # ------------------------------------------------------------------
    
    # 4.1 Handler ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô (‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö 'type' ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)
    async def show_customer_payment(self, event):
        # ‡∏™‡πà‡∏á JSON ‡πÑ‡∏õ‡∏´‡∏≤ Browser (Customer Display)
        await self.send(text_data=json.dumps({
            'type': 'show_customer_payment',
            'items': event['items'],
            'total': event['total']
        }))

    # 4.2 Handler ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
    async def hide_customer_payment(self, event):
        await self.send(text_data=json.dumps({
            'type': 'hide_customer_payment'
        }))
        
    # 4.3 (‡πÅ‡∏ñ‡∏°) Handler ‡πÄ‡∏î‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Order
    async def order_notification(self, event):
        await self.send(text_data=json.dumps({
            'type': 'order_notification',
            'message': event['message'],
            'order': event.get('order')
        }))


    async def table_update_notification(self, event):
        # ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ‡∏ö‡∏≠‡∏Å Browser ‡∏ß‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß
        await self.send(text_data=json.dumps({
            'command': 'refresh_tables' 
        }))


    # ‚≠ê ‡πÄ‡∏û‡∏¥‡πà‡∏° method ‡∏ô‡∏µ‡πâ (‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö 'type' ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å api.py)
    async def order_notification(self, event):
        # ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Layer
        order_data = event.get('order', {})
        message = event.get('message', '')

        # ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ Frontend (Cashier JS)
        await self.send(text_data=json.dumps({
            'command': 'new_order_alert', # ‡∏ä‡∏∑‡πà‡∏≠ command ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö JS
            'table': order_data.get('table', 'Unknown'),
            'total': order_data.get('total_price', 0),
            'message': message
        }))


=== orders/__init__.py ===



=== orders/apps.py ===
from django.apps import AppConfig


class OrdersConfig(AppConfig):
    name = 'orders'



=== orders/api.py ===
# orders/api.py
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from django.shortcuts import get_object_or_404
from restaurants.models import Table, MenuItem
from .models import Order, OrderItem
import json
from channels.layers import get_channel_layer
from asgiref.sync import async_to_sync

@csrf_exempt
def create_order_api(request):
    if request.method == 'POST':
        try:
            data = json.loads(request.body)
            
            # 1. ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            table_uuid = data.get('table_uuid')
            cart_items = data.get('cart') 
            
            if not table_uuid or not cart_items:
                return JsonResponse({'error': '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô'}, status=400)

            # 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏ï‡πä‡∏∞
            table = get_object_or_404(Table, uuid=table_uuid)
            restaurant = table.restaurant
            
            # 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á Order Header
            order = Order.objects.create(
                restaurant=restaurant,
                table=table,
                status='PENDING',
                session_id=request.session.session_key or ''
            )
            
            total_price = 0
            
            # 4. ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á Order Items
            for item_data in cart_items:
                # ‡πÉ‡∏ä‡πâ try-except ‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏ì‡∏µ Menu ID ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
                try:
                    menu_item = MenuItem.objects.get(id=item_data['id'])
                except MenuItem.DoesNotExist:
                    continue # ‡∏Ç‡πâ‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠

                OrderItem.objects.create(
                    order=order,
                    menu_item=menu_item,
                    quantity=item_data['qty'],
                    price=menu_item.price, # Snapshot ‡∏£‡∏≤‡∏Ñ‡∏≤
                    note=item_data.get('note', '')
                )
                total_price += (menu_item.price * item_data['qty'])
            
            # 5. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°
            order.total_price = total_price
            order.save()

            # ==========================================================
            # ‚≠ê ADD THIS: ‡∏™‡πà‡∏á Real-time Notification
            # ==========================================================
            
            # ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (‡πÉ‡∏ä‡πâ select_related ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î query)
            # ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÉ‡∏ä‡πâ order.orderitem_set.all() ‡πÄ‡∏ß‡πâ‡∏ô‡πÅ‡∏ï‡πà‡πÉ‡∏ô models.py ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á related_name='items'
            created_items = order.items.select_related('menu_item').all()
            
            item_list = [
                f"{item.menu_item.name} x{item.quantity}" 
                for item in created_items
            ]

            channel_layer = get_channel_layer()
            async_to_sync(channel_layer.group_send)(
                f'restaurant_{restaurant.id}',
                {
                    'type': 'order_notification',
                    'message': 'New Order Received',
                    'order': {
                        'id': order.id,
                        'table': table.name,
                        'total_price': float(order.total_price),
                        'items': item_list,
                        'created_at': order.created_at.strftime('%H:%M')
                    }
                }
            )
            
            return JsonResponse({'success': True, 'order_id': order.id})
            
        except Exception as e:
            # Print error ‡∏•‡∏á console ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ debug ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏à‡∏≠ 500
            print(f"Error creating order: {e}")
            return JsonResponse({'error': str(e)}, status=500)
            
    return JsonResponse({'error': 'Method not allowed'}, status=405)


@csrf_exempt
def update_order_status(request):
    if request.method == 'POST':
        try:
            data = json.loads(request.body)
            order_id = data.get('order_id')
            new_status = data.get('status')
            
            order = get_object_or_404(Order, id=order_id)
            
            order.status = new_status
            order.save()
            
            # (Optional) ‡∏™‡πà‡∏á WebSocket ‡∏ö‡∏≠‡∏Å Dashboard ‡πÉ‡∏´‡πâ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡πá‡πÑ‡∏î‡πâ
            # ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤ ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡πâ‡∏ß
            channel_layer = get_channel_layer()
            async_to_sync(channel_layer.group_send)(
                f'restaurant_{order.restaurant.id}',
                {
                    'type': 'order_notification', # ‡πÉ‡∏ä‡πâ type ‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ
                    'message': 'Order Updated',
                    'order': {
                        'id': order.id,
                        'status': new_status,
                        # ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏Ñ‡πà‡∏ô‡∏µ‡πâ‡∏û‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Frontend ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
                        'refresh_only': True 
                    }
                }
            )
            
            return JsonResponse({'success': True, 'status': new_status})
        except Exception as e:
            return JsonResponse({'error': str(e)}, status=500)
            
    return JsonResponse({'error': 'Method not allowed'}, status=405)


=== orders/admin.py ===
from django.contrib import admin

# Register your models here.



=== orders/routing.py ===
# orders/routing.py
from django.urls import re_path
from . import consumers

websocket_urlpatterns = [
    # URL ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö WebSocket: ws://localhost:8000/ws/orders/1/
    re_path(r'ws/orders/(?P<restaurant_id>\w+)/$', consumers.OrderConsumer.as_asgi()),
    
    re_path(r'ws/restaurant/(?P<restaurant_id>\w+)/$', consumers.OrderConsumer.as_asgi()),
]


=== orders/tests.py ===
from django.test import TestCase

# Create your tests here.



=== orders/urls.py ===
from django.urls import path
from . import api

urlpatterns = [
    path('api/create/', api.create_order_api, name='api_create_order'),
    path('api/update-status/', api.update_order_status, name='api_update_status'),
]


=== orders/views.py ===
from django.shortcuts import render

# Create your views here.

