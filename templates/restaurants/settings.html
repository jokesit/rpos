{% extends "base.html" %}

{% block content %}
<div class="flex flex-col md:flex-row gap-6">
    
    <aside class="w-full md:w-64 bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-fit shrink-0">
        <div class="text-center mb-6">
            {% if restaurant.image %}
                <img src="{{ restaurant.image.url }}" class="w-20 h-20 rounded-full mx-auto mb-3 object-cover border-2 border-blue-100 shadow-sm">
            {% else %}
                <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3 text-2xl">üè™</div>
            {% endif %}
            <h3 class="font-bold text-gray-800 text-lg">{{ restaurant.name }}</h3>
        </div>
        </aside>

    <main class="flex-1">
        <div class="max-w-3xl bg-white rounded-xl shadow-sm border border-gray-100 p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
            
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div class="mb-8 flex flex-col items-center sm:flex-row gap-6 p-6 bg-gray-50 rounded-xl border border-dashed border-gray-300">
                    <div class="shrink-0 relative">
                        {% if restaurant.image %}
                            <img id="image-preview" src="{{ restaurant.image.url }}" class="h-32 w-32 object-cover rounded-lg shadow-md bg-white">
                        {% else %}
                            <img id="image-preview" src="https://via.placeholder.com/150?text=No+Logo" class="h-32 w-32 object-cover rounded-lg shadow-md bg-white opacity-50">
                        {% endif %}
                    </div>
                    
                    <div class="flex-1 w-full text-gray-500">
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                        <p class="text-xs text-gray-500 mb-3">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏ô‡∏≤‡∏î 800x800 px (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö JPG, PNG)</p>
                        
                        {{ form.image }}
                        
                        {% if form.image.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ form.image.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>

                <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Username)</label>
                    {{ form.username }}
                    {% if form.username.errors %}
                        <p class="text-red-500 text-xs mt-1">{{ form.username.errors.0 }}</p>
                    {% endif %}
                </div>

                <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</h3>
                <div class="space-y-4 mb-8">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                        {{ form.name }}
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                            {{ form.phone }}
                        </div>
                        </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                        {{ form.address }}
                    </div>
                </div>

                <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô & ‡∏†‡∏≤‡∏©‡∏µ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">VAT (%)</label>
                        {{ form.vat_percent }}
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Service Charge (%)</label>
                        {{ form.service_charge_percent }}
                    </div>
                </div>

                <div class="flex justify-end pt-4 border-t">
                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition transform active:scale-95">
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
                    </button>
                </div>
            </form>
        </div>
    </main>
</div>

<script>
    const imageInput = document.querySelector('input[type="file"]');
    const imagePreview = document.getElementById('image-preview');

    if (imageInput) {
        imageInput.addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    imagePreview.classList.remove('opacity-50'); // ‡πÄ‡∏≠‡∏≤‡∏Å‡∏£‡∏ì‡∏µ no-logo ‡∏≠‡∏≠‡∏Å
                }
                reader.readAsDataURL(file);
            }
        });
    }
</script>
{% endblock %}